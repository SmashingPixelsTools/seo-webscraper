<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SEO Results</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 2rem; }
    .result-card { margin-bottom: 2rem; padding: 1.5rem; border: 1px solid #ccc; border-radius: 0.5rem; }
    .truncate { max-height: 8rem; overflow: hidden; }
    .footer { text-align: center; margin-top: 3rem; color: #666; font-size: 0.9rem; }
    .suggestions { background-color: #fff3cd; padding: 1rem; border-left: 5px solid #ffc107; border-radius: 0.5rem; }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="mb-4">SEO Analysis Results</h1>
    {% for item in results %}
    <div class="result-card">
      <h4>{{ item.url }}</h4>
      {% if item.error %}
        <p class="text-danger">Error: {{ item.error }}</p>
      {% else %}
        <p><strong>Title:</strong> {{ item.title }}</p>
        <p><strong>Meta Description:</strong> {{ item.meta_description }}</p>
        <p><strong>Schema:</strong> {{ item.schema | join(', ') if item.schema else 'N/A' }}</p>
        {% for level, tags in item.headings.items() %}
          <p><strong>{{ level }}:</strong><br> {{ tags | safe }}</p>
        {% endfor %}
        {% if item.suggestions %}
          <div class="suggestions mt-3">
            <strong>Suggestions:</strong>
            <ul>
              {% for s in item.suggestions %}
                <li>{{ s }}</li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      {% endif %}
    </div>
    {% endfor %}
    <div class="footer">
      <p>Need help with SEO? Contact <a href="https://calendly.com/trevor-cherewka">Trevor Cherewka at Smashing Pixels</a>.</p>
    </div>
  </div>
</body>
</html>